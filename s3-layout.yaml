buckets:
  - name: "{prefix}-raw-{env}"
    purpose: "User uploads (source of truth). No public access."
    prefixes:
      - "obo=${obo_id}/case=${case_id}/upload/"
    lifecycle:
      - id: "expire-unreferenced"
        rule: "days_since_upload > 30 && not referenced"
      - id: "transition-to-infrequent"
        rule: "days_since_upload > 7"
  - name: "{prefix}-artifacts-{env}"
    purpose: "Derived artifacts (OCR JSON, TEXT, PAGE_IMAGE, LOG)."
    prefixes:
      - "obo=${obo_id}/case=${case_id}/artifact_type=${type}/"
    lifecycle:
      - id: "expire-low-value"
        rule: "days_since_create > 90"
  - name: "{prefix}-results-{env}"
    purpose: "Packaged human views and result bundles delivered to clients."
    prefixes:
      - "obo=${obo_id}/case=${case_id}/"
    lifecycle:
      - id: "retain-core"
        rule: "retain >= 365 days"
notes:
  - "All access via presigned URLs or signed CloudFront; block public ACLs."
  - "Server-side encryption SSE-S3 or SSE-KMS; bucket keys enabled."
  - "Object keys must include obo and case to support tenancy isolation."
